--IRCTC DATABASE SCHEMA

CREATE DATABASE IRCTC;

CREATE TABLE TRAIN(
	TRAIN_NO VARCHAR(10) PRIMARY KEY,
	TRAIN_NAME VARCHAR(50) NOT NULL
);

CREATE TABLE CUSTOMER(
	CUSTOMER_NO VARCHAR(50) PRIMARY KEY,
	FIRST_NAME VARCHAR(50) NOT NULL,
	LAST_NAME VARCHAR(50),
	AGE INT
);

CREATE TABLE TICKET(
	TICKET_NO SERIAL PRIMARY KEY ,
	STATUS VARCHAR(10) NOT NULL CHECK (STATUS IN ('RESERVED','UNRESERVED')),
	CREATED_TIME TIMESTAMP NOT NULL
);

CREATE TABLE TRAVEL(
	TRAIN_NO VARCHAR(10),
	CUSTOMER_NO VARCHAR(50),
	TICKET_NO INT NOT NULL,
	TRAVEL_START_DATE DATE NOT NULL,
	TRAVEL_END_DATE DATE NOT NULL,
	PRIMARY KEY (TRAIN_NO, CUSTOMER_NO),
	FOREIGN KEY  (TRAIN_NO) REFERENCES TRAIN(TRAIN_NO),
	FOREIGN KEY  (CUSTOMER_NO) REFERENCES CUSTOMER(CUSTOMER_NO),
	FOREIGN KEY  (TICKET_NO) REFERENCES TICKET(TICKET_NO) 
);
